(this["webpackJsonpcreate-react-app-with-typescript"]=this["webpackJsonpcreate-react-app-with-typescript"]||[]).push([[0],{14:function(e){e.exports=JSON.parse('{"baseAddress":"https://api.nome.fi:54321/v1/"}')},156:function(e,t,n){},157:function(e,t,n){},165:function(e,t,n){},166:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),c=n.n(o),s=n(202),i=n(221),l=n(18),d=n(39),u=n(27),j=n(17),h=n(11),b=n(197),m=Object(b.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(img/chess.jpg)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(2,0,2)}}})),p=n(200),f=n(117),g=n(225),x=n(69),O=n(222),v=n(206),y=n(74),k=n.n(y),w=n(110),N=n(14),S=n(15),I=n.n(S);var C=n(2),A=function(e){var t=e.onLoginRedirect,n=e.history,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(a.useState)(t),r=Object(j.a)(n,2),o=r[0],c=r[1];return{onChange:function(e){c(Object(u.a)(Object(u.a)({},o),{},Object(d.a)({},e.target.name,e.target.value)))},onSubmit:function(){var t=Object(w.a)(k.a.mark((function t(n){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),values:o}}((function(){(e=i,I.a.post(N.baseAddress+"login",e).then((function(e){return e})).catch((function(e){if(e.response)return e.response}))).then((function(e){if(401===e.status){var a=e.data;alert(a)}else{var r=e.data;r&&("admin"===r.user.permissionLevel?(localStorage.setItem("token",r.token),localStorage.setItem("refreshToken",r.refreshToken),n.push(t)):alert("you are not admin"))}}));var e}),{email:"",password:""}),o=r.onChange,c=r.onSubmit,i=r.values;var l=m();return localStorage.getItem("token")?Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(h.a,{to:"/dashboard"})}):Object(C.jsxs)(p.a,{container:!0,component:"main",className:l.root,children:[Object(C.jsx)(s.a,{}),Object(C.jsx)(p.a,{item:!0,xs:!1,sm:4,md:7,className:l.image}),Object(C.jsx)(p.a,{item:!0,xs:12,sm:8,md:5,component:f.a,elevation:6,square:!0,children:Object(C.jsxs)("div",{className:l.paper,children:[Object(C.jsx)(g.a,{className:l.avatar}),Object(C.jsx)(x.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(C.jsxs)("form",{className:l.form,noValidate:!0,onSubmit:c,children:[Object(C.jsx)(O.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Username",name:"email",onChange:o,autoComplete:"email",autoFocus:!0}),Object(C.jsx)(O.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",onChange:o,label:"Password",type:"password",id:"password",autoComplete:"current-password"}),Object(C.jsx)(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:l.submit,children:"Sign In"})]})]})})]})},E=n(66),D=n.n(E),T=n(207),L=n(208),R=n(209),F=Object(b.a)((function(e){return{root:{maxWidth:300,borderRadius:40,padding:30,lineHeight:1.5,boxShadow:"0px 2px 8px rgba(0,0,0,0.05)",transition:"transform 280ms ease-in-out, box-shadow 200ms ease-in-out","&:hover":{transform:"translateY(-10px)",boxShadow:"0px 4px 16px rgba(0,0,0,0.1)"}},keys:{marginTop:20,display:"flex"},keyIcon:{marginLeft:20,fontSize:34,transform:"rotate(-90deg)",color:"rgb(37, 150, 190)",display:"flex",justifyContent:"center",alignItems:"center",marginTop:"7px"},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:18,fontWeight:400},pos:{marginBottom:12}}}));function z(e){return I.a.get(N.baseAddress+"key",{headers:{Authorization:"token ".concat(e)}}).then((function(e){return e.data})).catch((function(e){console.error(e)}))}function B(){var e=F(),t=localStorage.getItem("token"),n=r.a.useState(0),o=Object(j.a)(n,2),c=o[0],s=o[1];return Object(a.useEffect)((function(){z(t).then((function(e){console.log("called"),console.log(e),s(e.length)})).catch((function(e){return console.log(e)}))})),Object(C.jsxs)(T.a,{className:e.root,children:[Object(C.jsxs)(L.a,{children:[Object(C.jsx)(x.a,{className:e.title,gutterBottom:!0,children:"Available Keys"}),Object(C.jsxs)(x.a,{className:e.keys,variant:"h4",component:"h5",children:[c,Object(C.jsx)(D.a,{className:e.keyIcon})]})]}),Object(C.jsx)(R.a,{children:Object(C.jsx)(v.a,{href:"/dashboard/keys",size:"small",children:"Learn More"})})]})}var W=n(210);function M(e){return I.a.get(N.baseAddress+"target",{headers:{Authorization:"token ".concat(e)}}).then((function(e){return e.data})).catch((function(e){console.error(e)}))}function K(){var e=F(),t=localStorage.getItem("token"),n=r.a.useState(0),o=Object(j.a)(n,2),c=o[0],s=o[1];return Object(a.useEffect)((function(){M(t).then((function(e){return s(e.length)})).catch((function(e){return console.log(e)}))}),[]),Object(C.jsxs)(T.a,{className:e.root,children:[Object(C.jsxs)(L.a,{children:[Object(C.jsx)(x.a,{className:e.title,gutterBottom:!0,children:"Available Targets"}),Object(C.jsxs)(x.a,{className:e.keys,variant:"h4",component:"h5",children:[c,Object(C.jsx)(W.a,{className:e.keyIcon})]})]}),Object(C.jsx)(R.a,{children:Object(C.jsx)(v.a,{href:"/dashboard/active-keys",size:"small",children:"Learn More"})})]})}function P(){var e=F(),t=localStorage.getItem("token"),n=r.a.useState(0),o=Object(j.a)(n,2),c=o[0],s=o[1];return Object(a.useEffect)((function(){M(t).then((function(e){return s(e.length)})).catch((function(e){return console.log(e)}))}),[]),Object(C.jsxs)(T.a,{className:e.root,children:[Object(C.jsxs)(L.a,{children:[Object(C.jsx)(x.a,{className:e.title,gutterBottom:!0,children:"Available Examples"}),Object(C.jsxs)(x.a,{className:e.keys,variant:"h4",component:"h5",children:[c+999,Object(C.jsx)(W.a,{className:e.keyIcon})]})]}),Object(C.jsx)(R.a,{children:Object(C.jsx)(v.a,{size:"small",children:"Learn More"})})]})}function H(){var e=F(),t=localStorage.getItem("token"),n=r.a.useState(0),o=Object(j.a)(n,2),c=o[0],s=o[1];return Object(a.useEffect)((function(){M(t).then((function(e){return s(e.length)})).catch((function(e){return console.log(e)}))}),[]),Object(C.jsxs)(T.a,{className:e.root,children:[Object(C.jsxs)(L.a,{children:[Object(C.jsx)(x.a,{className:e.title,gutterBottom:!0,children:"Available Examples"}),Object(C.jsxs)(x.a,{className:e.keys,variant:"h4",component:"h5",children:[c+123,Object(C.jsx)(W.a,{className:e.keyIcon})]})]}),Object(C.jsx)(R.a,{children:Object(C.jsx)(v.a,{size:"small",children:"Learn More"})})]})}var G=220,q=Object(b.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),height:55},appBarShift:{width:"calc(100% - ".concat(G,"px)"),height:55,marginLeft:G,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},title:{fontSize:14,fontWeight:500,marginLeft:20},items:{fontSize:15,marginTop:"0.2rem"},selected:{backgroundColor:"rgb(197, 250, 211) !important",color:"green",fontWeight:60},hide:{display:"none"},drawer:{width:G,flexShrink:0},drawerPaper:{width:G},drawerHeader:Object(u.a)(Object(u.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-220},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}})),V=(n(94),n(67)),U=n(226),J=n(211);n(95);var Y=n(24),Z=n.n(Y);var Q=function(e){Object(l.a)(e);var t=function(e){e.preventDefault(),function(e,t,n){var a=localStorage.getItem("token"),r={name:e,owner:t,expiresAt:n},o={method:"post",headers:{Authorization:"token ".concat(a)},url:N.baseAddress+"key",data:r};return I()(o).then((function(e){return e})).catch((function(e){if(e.response)return e.response}))}(e.target.name.value,e.target.owner.value,e.target.expire.value).then((function(e){if(console.log(e),400===e.status)alert(e.data);else if(403===e.status)alert(e.data);else{var t=e.data.key;Z()({text:"Key created",button:{text:"Copy key"},content:{element:"input",attributes:{placeholder:"key",type:"input",value:t}}}).then((function(){var e=document.createElement("textarea");document.body.appendChild(e),e.value=t,e.select(),document.execCommand("copy"),document.body.removeChild(e),Z()("Key copied!",{icon:"success"})}))}}))};return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(V.a,{closeOnDocumentClick:!1,trigger:Object(C.jsx)(U.a,{title:"Create a new key",children:Object(C.jsx)(J.a,{children:Object(C.jsx)(D.a,{})})}),modal:!0,children:function(e){return Object(C.jsxs)("div",{className:"modal",children:[Object(C.jsx)("button",{className:"close",onClick:e,children:"\xd7"}),Object(C.jsx)("div",{className:"header",children:" Add a new key "}),Object(C.jsx)("div",{className:"content",children:Object(C.jsxs)("form",{onSubmit:t,children:[Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{htmlFor:"inputAddress",children:"Name"}),Object(C.jsx)("input",{type:"text",name:"name",className:"form-control",id:"inputAddress",placeholder:""})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{htmlFor:"inputAddress2",children:"Owner"}),Object(C.jsx)("input",{type:"text",name:"owner",className:"form-control",id:"inputAddress2",placeholder:""})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{htmlFor:"inputAddress2",children:"Expires At"}),Object(C.jsx)("input",{id:"party",name:"expire",type:"datetime-local",defaultValue:"2022-01-01T00:00"})]}),Object(C.jsx)(v.a,{style:{marginTop:"20px"},type:"submit",variant:"contained",color:"primary",children:"Submit"})]})}),Object(C.jsx)("button",{className:"close",onClick:function(){e()},children:"\xd7"})]})}})})};var X=function(e){Object(l.a)(e);var t=function(e){e.preventDefault();var t=e.target.name.value;(function(e,t,n,a){var r=localStorage.getItem("token"),o={key:e,name:t,url:n,details:a},c={method:"post",headers:{Authorization:"token ".concat(r)},url:N.baseAddress+"target",data:o};return I()(c).then((function(e){return e})).catch((function(e){if(e.response)return e.response}))})(e.target.key.value,t,"http://nmas.nome.fi:"+e.target.url.value,e.target.details.value).then((function(e){console.log(e),400===e.status||403===e.status?alert(e.data):(alert("created success !"),window.location.reload(!1))}))};return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(V.a,{trigger:Object(C.jsx)(U.a,{title:"Create a new target",children:Object(C.jsx)(J.a,{children:Object(C.jsx)(W.a,{})})}),modal:!0,children:function(e){return Object(C.jsxs)("div",{className:"modal",children:[Object(C.jsx)("button",{className:"close",onClick:e,children:"\xd7"}),Object(C.jsx)("div",{className:"header",children:" Add a new key "}),Object(C.jsx)("div",{className:"content",children:Object(C.jsxs)("form",{onSubmit:t,children:[Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{htmlFor:"inputAddress",children:"Name"}),Object(C.jsx)("input",{type:"text",name:"name",className:"form-control",id:"inputAddress",placeholder:""})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{htmlFor:"inputAddress2",children:"Key"}),Object(C.jsx)("input",{type:"text",name:"key",className:"form-control",id:"inputAddress2",placeholder:""})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{htmlFor:"inputAddress2",children:"Port"}),Object(C.jsx)("i",{className:"fa fa-question-circle","aria-hidden":"true",title:"Base url: http://nmas.nome.fi"}),Object(C.jsx)("input",{type:"text",name:"url",className:"form-control",id:"inputAddress2",placeholder:"50000"})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{htmlFor:"inputAddress2",children:"Details"}),Object(C.jsx)("input",{type:"text",name:"details",className:"form-control",id:"inputAddress2",placeholder:""})]}),Object(C.jsx)(v.a,{style:{marginTop:"20px"},type:"submit",variant:"contained",color:"primary",children:"Submit"})]})}),Object(C.jsx)("button",{className:"close",onClick:function(){e()},children:"\xd7"})]})}})})},$=Object(b.a)((function(e){return{root:{maxWidth:300,borderRadius:40,padding:30,lineHeight:1.5,boxShadow:"0px 2px 8px rgba(0,0,0,0.05)"}}})),_=function(e){Object(l.a)(e);var t=$();return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("h1",{children:"Action"}),Object(C.jsx)(T.a,{className:t.root,children:Object(C.jsxs)(L.a,{children:[Object(C.jsx)(Q,{}),Object(C.jsx)(X,{})]})})]})},ee=(n(156),function(e){Object(l.a)(e);var t=q();return Object(C.jsxs)("div",{className:"container",children:[Object(C.jsx)("div",{className:t.drawerHeader}),Object(C.jsx)("h1",{children:"Dashboard"}),Object(C.jsxs)("div",{className:"progress",children:[Object(C.jsx)("div",{className:"keys",children:Object(C.jsx)(B,{})}),Object(C.jsx)("div",{className:"active-keys",children:Object(C.jsx)(K,{})}),Object(C.jsx)("div",{className:"owner",children:Object(C.jsx)(P,{})}),Object(C.jsx)("div",{className:"example",children:Object(C.jsx)(H,{})})]}),Object(C.jsx)("div",{className:"grid",children:Object(C.jsx)(_,{})})]})}),te=(n(157),n(53)),ne=n.n(te),ae=(n(158),function(e){if("action"===e.column.colId&&e.event.target.dataset.action){var t=e.event.target.dataset.action;"edit"===t&&e.api.startEditingCell({rowIndex:e.node.rowIndex,colKey:e.columnApi.getDisplayedCenterColumns()[0].colId}),"update"===t&&e.api.stopEditing(!1),"cancel"===t&&e.api.stopEditing(!0)}}),re=function(e){e.api.refreshCells({columns:["action"],rowNodes:[e.node],force:!0})},oe=function(e){e.api.refreshCells({columns:["action"],rowNodes:[e.node],force:!0})},ce=function(){function e(){}return e.prototype.init=function(e){this.eInput=document.createElement("input"),this.eInput.value=e.value,ne()(this.eInput).datepicker({dateFormat:"yy-mm-ddT00:00:00.000Z"})},e.prototype.getGui=function(){return this.eInput},e.prototype.afterGuiAttached=function(){this.eInput.focus(),this.eInput.select()},e.prototype.getValue=function(){return this.eInput.value},e.prototype.destroy=function(){},e.prototype.isPopup=function(){return!1},e},se=n(68);n(103),n(104),n(105);var ie=[{headerName:"ID",field:"id",sortable:!0,filter:!0,editable:!1,flex:1},{headerName:"Key",field:"key",sortable:!0,filter:!0,editable:!1,flex:2},{headerName:"Name",field:"name",sortable:!0,filter:!0,flex:1},{headerName:"Owner",field:"owner",sortable:!0,filter:!0,editable:!1,flex:1},{headerName:"Expires at",field:"expiresAt",sortable:!0,filter:!0,flex:1.5,maxWidth:400,cellEditor:"datePicker",valueFormatter:function(e){var t=(new Date).toISOString().substring(0,10),n=new Date(e.value).toISOString().substring(0,10);return n+" ("+Math.floor((Date.parse(n)-Date.parse(t))/864e5)+" days left)"}},{headerName:"Action",minWidth:150,cellRenderer:function(e){var t=document.createElement("div"),n=e.api.getEditingCells().some((function(t){return t.rowIndex===e.node.rowIndex}));return t.innerHTML=n?'\n    <i class="fa fa-check" data-action="update" style="color:green"></i>\n    <i class="fa fa-times" data-action="cancel"></i>\n  ':'\n    <i class="fa fa-edit" data-action="edit" style="color:blue"></i>\n  ',t},editable:!1,colId:"action",width:80}],le={editable:!0,width:220,colSpan:function(e){return 2===e.data?3:1},filter:!0},de=function(e){console.log(e.data),Z()({title:"Are you sure to update this row?",icon:"warning",buttons:!0,dangerMode:!0}).then((function(t){if(t){var n=e.data;(function(e,t,n){var a=localStorage.getItem("token"),r={name:t,expiresAt:n},o={method:"patch",headers:{Authorization:"token ".concat(a)},url:N.baseAddress+"key/"+e,data:r};return I()(o).then((function(e){return e})).catch((function(e){if(e.response)return e.response}))})(n.id,n.name,n.expiresAt).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})),Z()("Updated!","Your key has been updated!","success")}}))},ue=function(e){Object(l.a)(e);var t=Object(a.useState)(),n=Object(j.a)(t,2),r=n[0],o=n[1],c=localStorage.getItem("token");return Object(a.useEffect)((function(){console.log("get new token"),z(c).then((function(e){return o(e)})).catch((function(e){return console.log(e)}))}),[]),Object(a.useEffect)((function(){var e=setInterval((function(){localStorage.getItem("token"),console.log("new token applied 2 mins ago !")}),12e4);return function(){return clearInterval(e)}})),Object(C.jsxs)("div",{className:"ag-theme-alpine container",style:{width:"80%",height:"500px",marginTop:"100px"},children:[Object(C.jsx)("h1",{children:"Available Keys"}),Object(C.jsx)(se.AgGridReact,{onRowEditingStopped:oe,onRowEditingStarted:re,onCellClicked:ae,columnDefs:ie,rowData:r,rowSelection:"multiple",editType:"fullRow",defaultColDef:le,suppressClickEdit:!0,enableRangeSelection:!0,onRowValueChanged:de,suppressCopyRowsToClipboard:!0,components:{datePicker:ce()}})]})},je=n(4),he=n(212),be=n(213),me=n(112),pe=n.n(me),fe=function(e){var t=e.open,n=e.handleDrawerOpen,a=e.onLogOut,r=q();return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(s.a,{}),Object(C.jsx)(he.a,{position:"fixed",className:Object(je.a)(r.appBar,Object(d.a)({},r.appBarShift,t)),color:"default",style:{background:"inherit",boxShadow:"none"},children:Object(C.jsxs)(be.a,{children:[Object(C.jsx)(J.a,{color:"inherit","aria-label":"open drawer",onClick:n,edge:"start",className:Object(je.a)(r.menuButton,t&&r.hide),children:Object(C.jsx)(pe.a,{})}),Object(C.jsx)(x.a,{variant:"h6",noWrap:!0}),Object(C.jsx)(v.a,{href:"/",onClick:a,style:{marginLeft:"80%",fontSize:16},color:"inherit",children:"Log-out"})]})})]})},ge=n(37),xe=n(21),Oe=n(224),ve=n(205),ye=n(216),ke=n(217),we=n(219),Ne=n(214),Se=n(215),Ie=n(218),Ce=n(220),Ae=(n(165),function(e){var t=e.open,n=e.handleDrawerClose,o=q(),c=Object(xe.a)(),s=r.a.useState(0),i=Object(j.a)(s,2),l=i[0],d=i[1],u=function(e,t){d(t)};return Object(a.useEffect)((function(){switch(console.log(window.location.pathname),window.location.pathname){case"/dashboard":d(0);break;case"/dashboard/keys":d(1);break;case"/dashboard/active-keys":d(2);break;default:d(0)}}),[l]),Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(Oe.a,{className:o.drawer,variant:"persistent",anchor:"left",open:t,classes:{paper:o.drawerPaper},children:[Object(C.jsx)("div",{className:o.drawerHeader,children:Object(C.jsx)(J.a,{color:"inherit",onClick:n,children:"ltr"===c.direction?Object(C.jsx)(Ne.a,{}):Object(C.jsx)(Se.a,{})})}),Object(C.jsx)(x.a,{className:o.title,gutterBottom:!0,children:"GENERAL"}),Object(C.jsxs)(ve.a,{component:"nav","aria-label":"main folders",children:[Object(C.jsxs)(ye.a,{button:!0,component:ge.b,to:"/dashboard",classes:{selected:o.selected},selected:0===l,onClick:function(e){return u(0,0)},children:[Object(C.jsx)(ke.a,{children:Object(C.jsx)(Ie.a,{})}),Object(C.jsx)(we.a,{primary:Object(C.jsx)(x.a,{className:o.items,color:"textSecondary",gutterBottom:!0,children:"Dashboard"})})]}),Object(C.jsx)("br",{}),Object(C.jsx)(x.a,{className:o.title,gutterBottom:!0,children:"TOOLS"}),Object(C.jsxs)(ye.a,{button:!0,component:ge.b,to:"/dashboard/keys",classes:{selected:o.selected},selected:1===l,onClick:function(e){return u(0,1)},children:[Object(C.jsx)(ke.a,{children:Object(C.jsx)(Ce.a,{})}),Object(C.jsx)(we.a,{primary:Object(C.jsx)(x.a,{className:o.items,color:"textSecondary",gutterBottom:!0,children:"Keys"})})]}),Object(C.jsxs)(ye.a,{button:!0,component:ge.b,to:"/dashboard/active-keys",classes:{selected:o.selected},selected:2===l,onClick:function(e){return u(0,2)},children:[Object(C.jsx)(ke.a,{children:Object(C.jsx)(W.a,{})}),Object(C.jsx)(we.a,{primary:Object(C.jsx)(x.a,{className:o.items,color:"textSecondary",gutterBottom:!0,children:"Active Targets"})})]})]})]})})}),Ee=function(e){var t=e.open,n=e.handleDrawerClose,a=e.handleDrawerOpen,r=e.onLogOut,o=q();return localStorage.getItem("token")?Object(C.jsxs)("div",{className:o.root,children:[Object(C.jsx)(fe,{open:t,handleDrawerOpen:a,onLogOut:r}),Object(C.jsx)(Ae,{open:t,handleDrawerClose:n})]}):Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(h.a,{to:"/"})})};var De=function(e){if("action"===e.column.colId&&e.event.target.dataset.action){var t=e.event.target.dataset.action;if("edit"===t&&e.api.startEditingCell({rowIndex:e.node.rowIndex,colKey:e.columnApi.getDisplayedCenterColumns()[0].colId}),"delete"===t){console.log(e.data);var n=e.data,a=n.id,r=n.name;Z()({title:"Are you sure to delete this row? Name: "+r,text:"Once deleted, you will not be able to recover this key!",icon:"warning",buttons:!0,dangerMode:!0}).then((function(t){t&&(function(e){var t=localStorage.getItem("token");return I.a.delete(N.baseAddress+"target/"+e,{headers:{Authorization:"token ".concat(t)}}).then((function(e){return e.data})).catch((function(e){console.error(e)}))}(a).then((function(e){return console.log(e)})).catch((function(e){return console.error(e)})),Z()("Deleted!","Your key has been deleted!","success"),e.api.applyTransaction({remove:[e.node.data]}))}))}"update"===t&&(alert("sad"),e.api.stopEditing(!1)),"cancel"===t&&e.api.stopEditing(!0)}},Te=function(e){e.api.refreshCells({columns:["action"],rowNodes:[e.node],force:!0})},Le=function(e){e.api.refreshCells({columns:["action"],rowNodes:[e.node],force:!0})};var Re=[{headerName:"ID",field:"id",sortable:!0,filter:!0,editable:!1,flex:1},{headerName:"Name",field:"name",sortable:!0,filter:!0,flex:1},{headerName:"Details",field:"details",sortable:!0,filter:!0,flex:1},{headerName:"URL",field:"url",sortable:!0,filter:!0,flex:1},{headerName:"Action",minWidth:150,cellRenderer:function(e){var t=document.createElement("div"),n=e.api.getEditingCells().some((function(t){return t.rowIndex===e.node.rowIndex}));return t.innerHTML=n?'\n    <i class="fa fa-check" data-action="update" style="color:green"></i>\n    <i class="fa fa-times" data-action="cancel"></i>\n  ':'\n    <i class="fa fa-edit" data-action="edit" style="color:blue"></i>\n    <i class="fa fa-trash" data-action="delete" style="color:red"></i>\n  ',t},editable:!1,colId:"action",width:80}],Fe={editable:!0,resizable:!0,colSpan:function(e){return 2===e.data?3:1}},ze=function(e){Z()({title:"Are you sure to update this row?",icon:"warning",buttons:!0,dangerMode:!0}).then((function(t){if(t){var n=e.data;(function(e,t,n,a){var r=localStorage.getItem("token"),o={name:e,details:t,url:n},c={method:"patch",headers:{Authorization:"token ".concat(r)},url:N.baseAddress+"target/"+a,data:o};return I()(c).then((function(e){return e})).catch((function(e){if(e.response)return e.response}))})(n.name,n.details,n.url,n.id).then((function(e){403===e.status?Z()("Error!",e.data,"warning"):Z()("Updated!",e.data,"success")})).catch((function(e){return console.error(e)}))}}))},Be=function(e){Object(l.a)(e);var t=Object(a.useState)(),n=Object(j.a)(t,2),r=n[0],o=n[1],c=localStorage.getItem("token");return Object(a.useEffect)((function(){var e=setInterval((function(){localStorage.getItem("token"),console.log("new token applied 2 mins ago !")}),12e4);return function(){return clearInterval(e)}})),Object(a.useEffect)((function(){M(c).then((function(e){console.log(e),o(e)})).catch((function(e){return console.log(e)}))}),[]),Object(C.jsxs)("div",{className:"ag-theme-alpine container",style:{width:"80%",height:"500px",marginTop:"100px"},children:[Object(C.jsx)("h1",{children:"Active Targets"}),Object(C.jsx)(se.AgGridReact,{onRowEditingStopped:Le,onRowEditingStarted:Te,onCellClicked:De,columnDefs:Re,rowData:r,rowSelection:"multiple",editType:"fullRow",defaultColDef:Fe,suppressClickEdit:!0,enableRangeSelection:!0,clipboardDeliminator:",",onRowValueChanged:ze,suppressCopyRowsToClipboard:!0,stopEditingWhenCellsLoseFocus:!0})]})};var We=function(e){Object(l.a)(e);var t=q(),n=r.a.useState(!0),o=Object(j.a)(n,2),c=o[0],s=o[1],i=function(){localStorage.removeItem("token"),localStorage.removeItem("refreshToken")},b=function(){(function(e){return I.a.post(N.baseAddress+"/login",{token:e}).then((function(e){return e.data})).catch((function(e){return e.response.status}))})(localStorage.getItem("refreshToken")).then((function(e){401===e||403===e?(alert("Please login!"),i(),window.location.reload(!1)):localStorage.setItem("token",e.token)})).catch((function(e){return console.error(e)}))},m=localStorage.getItem("token");return Object(a.useEffect)((function(){m&&b();var e=setInterval((function(){null!==m&&(b(),console.log("Applied refreshTokenInEveryThirtySeconds!"))}),3e4);return function(){return clearInterval(e)}})),Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(h.d,{children:[Object(C.jsx)(h.b,{exact:!0,path:"/",render:function(e){return Object(C.jsx)(A,Object(u.a)(Object(u.a)({},e),{},{onLoginRedirect:"/dashboard"}))}}),Object(C.jsxs)("div",{children:[Object(C.jsx)(Ee,{open:c,handleDrawerOpen:function(){return s(!0)},handleDrawerClose:function(){return s(!1)},onLogOut:i}),Object(C.jsxs)("main",{className:Object(je.a)(t.content,Object(d.a)({},t.contentShift,c)),children:[Object(C.jsx)(h.b,{path:"/dashboard",exact:!0,render:function(e){return Object(C.jsx)(ee,Object(u.a)({},e))}}),Object(C.jsx)(h.b,{path:"/dashboard/keys",render:function(e){return Object(C.jsx)(ue,Object(u.a)({},e))}}),Object(C.jsx)(h.b,{path:"/dashboard/active-keys",render:function(e){return Object(C.jsx)(Be,Object(u.a)({},e))}})]})]})]})})},Me=function(e){return Object(l.a)(e),Object(C.jsx)(ge.a,{children:Object(C.jsx)(We,{})})},Ke=n(113),Pe=n.n(Ke),He=n(114),Ge=Object(He.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:Pe.a.A400},background:{default:"#f9f9f9"}}});c.a.render(Object(C.jsxs)(i.a,{theme:Ge,children:[Object(C.jsx)(s.a,{}),Object(C.jsx)(Me,{})]}),document.querySelector("#root"))},94:function(e,t,n){}},[[166,1,2]]]);
//# sourceMappingURL=main.be9e4f7a.chunk.js.map